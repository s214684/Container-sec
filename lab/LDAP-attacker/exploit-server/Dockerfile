# Use an official OpenJDK image for compilation
FROM openjdk:8-jdk-alpine AS builder

# Set the working directory inside the container
WORKDIR /app

# Copy the Exploit.java file to the container
COPY Exploit.java .

# Compile the Java class
RUN javac Exploit.java

# Use a Python image as base to host the exploit
FROM python:3.7-alpine

# Copy the compiled class file to the
# container from the previous stage
COPY --from=builder /app/Exploit.class /app/Exploit.class

WORKDIR /app

# Expose port 80
EXPOSE 8080

# host the exploit
CMD ["python", "-m", "http.server", "8080"]


